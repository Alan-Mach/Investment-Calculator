/*****
By: Alan Mach

This program is an investment calculator which factors:
* Time in a market (in years)
* Number of investments/year
* Contributions which increase over time (i.e. to adjust with inflation)
* Upper and Lower  bounds for return rates  (coming soon)
* Nominal and Real interest rates   (coming soon)

Functions:
* takes in and outputs all information through a .txt file
* can take a starting contribution ammount and calculate the final investment total
* or can take an investment goal and extrapolate the contributions needed to reach it
    * the contributions needed each period is tabulated in the .txt file.

------------

Inflating Contributions Investment Formula (ICIF)
-   is a formula that is similar to a traditional investment formula that tracks 
    compound interest overtime with regular contributions. However, this 
    formula also accounts for the contribution amount increasing over time to
    meet inflation.

The formula is derived as:
    A = c * [(r^n - i^n)/(r-i)] * [(r^f - i^f)/(r-i)]

    where:
    A = The total amount of money at the end of the investment term
    c = The amount of the very first contribution in dollars
    r = The rate of interest on investments (1.00 = no increase)
    i = The rate of inflation (1.00 = no increase)
    n = The duration of the investment term in years
    f = The number of times a year contributions will be made

If you also want to include a principle investment, P, you can add to the 
previous formula:
    P * r^n

*****/

#include <stdio.h>
#include <math.h>

// money will be calculated in cents as an int

int main(void)
{
    int N = 0;      // ammount of time in market in years 
    int f = 0;      // number of times a year to contribute to fund
    double P = 0.0; // principle amount in dollars
    double c = 0.0; // amount being contributed per interval in dollars
    double i = 0.0; // inflation rate as a percent
    double r = 0.0; // nominal return rate as a percent 
    //double upperInterest = 0.0; // nominal upper bound return rate as a percent
    //double lowerInterest = 0.0; // nominal lower bound reutrn rate as a percent

    double total = 0.0;
    double upperTotal = 0.0;
    double lowerTotal = 0.0;

    // Retreiving information from user
    printf("How many years will you be investing in the market? Please Enter an integer: ");
    scanf("%d", &period);
    printf("How many times will you invest in a year? Please Enter an integer: ");
    scanf("%d", &interval);
    printf("How much money have you already invested? Please Enter a value: ");
    scanf("%lf", &principle);
    printf("How much money do you plan to invest at each interval? Please Enter a value: ");
    scanf("%lf", &contribution);
    printf("What is the average inflation rate? Please Enter a value: ");
    scanf("%lf", &inflation);
    printf("What is your average annual return rate? Please Enter a value: ");
    scanf("%lf", &interest);

    // Interest on first interval of principle
    total = principle*pow(interest, (double)1.0/interval);

    for (int i = 1; i < period*interval; i++)
    {
        total = (contribution*pow(inflation, (double)i/interval)) + (total*pow(interest, (double)1.0/interval)); 
    }

    printf("$%lf\n", total);

    return 0;
}
